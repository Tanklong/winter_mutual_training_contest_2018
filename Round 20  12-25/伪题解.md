## Round 20

出题人：高嘉煊、王之栋、张俊逸

#### 世界是个动物园

由于这是竞赛图，不难证明联盟即强连通分量，并且缩完强连通分量之后必然是一条链，前往后连有向边。考虑加入点x之后会发生啥，大概就是找到这条链上第一个有从x出发的边的点和最后一个向x连边的点，把链上这一段删掉，把x插进去代替这一段。我们只要维护一个动态标号，然后把x放在这一段前一个元素里面那一段的后面就好了（记一下每一段的结尾）。

如果你这个用替罪羊或者treap搞一个double出来，区间min max就只要线段树维护就好了。如果你像我一样蠢拿了个splay强行cmp，那么强行rmq复杂度也是对的（两个log在n上），然后你就MLE了（

#### 彩虹般绚烂

分段打表 $i^i$ 和 $i^{\varphi(i)}$，别的东西可以直接 min-25筛 和 杜教筛。常数优化各凭本事。

这里说一个优化，在区间筛的时候，不需要对每个 $i$ 算 $i^{\varphi(i)}$，smooth的可以对每个质数分别算。smooth的比例大概是0.3，所以还是有点用的。

~~题解果然也是打表，我觉得不行~~

#### 围绕着我们的圆环

原题：https://loj.ac/problem/6040

那么我们就只要能动态求矩阵的秩就好了。

修改一行有点困难，但是我们可以改成修改一列，这样就很容易了，随便维护一下高斯消元消完那玩意儿就好了。